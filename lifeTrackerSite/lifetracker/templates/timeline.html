{% extends 'base.html' %}
{% load static %}


{% block extraheaders %}
<script type="text/javascript" src="{% static "timeline/timeline.js"%}"></script>
<link rel="stylesheet" type="text/css" href="{% static "timeline/timeline.css"%}">

<script type="text/javascript">
        var timeline;
        var data;

        // Called when the Visualization API is loaded.
        function drawVisualization() {
            // Create a JSON data table
            data = [
                {% for event in events %}
                {
                    'start': new Date("{{ event.datetime.isoformat }}"),
                    'content': '{{event.name}}'
                },
                {% endfor %}

            ];

            // specify options
            var options = {
                'width':  '100%',
                'height': '300px',
                'editable': true,   // enable dragging and editing events
                'style': 'box'
            };

            // Instantiate our timeline object.
            timeline = new links.Timeline(document.getElementById('mytimeline'));

            
            /*
            function onRangeChanged(properties) {
                document.getElementById('info').innerHTML += 'rangechanged ' +
                        properties.start + ' - ' + properties.end + '<br>';
            }

            // attach an event listener using the links events handler
            links.events.addListener(timeline, 'rangechanged', onRangeChanged);
            */

            // Draw our timeline with the created data and options
            timeline.draw(data, options);
        }
    </script>
{% endblock %}


{% block body %}
<body onload="drawVisualization();">
{% endblock %}

{% block content %}
<h1>Timeline</h1>

<div id="mytimeline"></div>

<div id="info"></div>

{% endblock %}

